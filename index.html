<html>
</head>
<title></title>
<link rel="stylesheet" href="css/style.css">

<style>

.userWallet{
    position: absolute;
    right: 10%;
  
}
.bchBalance {
    font-family: 'Inter var',sans-serif;
    font-size: 12px;
    display: flex;
    flex-direction: row;
    -moz-box-align: center;
    align-items: center;
    background-color: rgb(237, 238, 242);
    border-radius: 12px;
    white-space: nowrap;
    width: 20%;
    cursor: pointer;
    box-sizing: border-box;
    margin: 0px;
    min-width: 0px;
    padding-left: 0.75rem;
    font-weight: 500;
    padding-right: 0.5rem;
    

}

.userAccount{
    font-family: 'Inter var',sans-serif;
    text-align: center;
outline: currentcolor none medium;
text-decoration: none;
-moz-box-pack: center;
justify-content: center;
position: relative;
z-index: 1;
will-change: transform;
transition: transform 450ms ease 0s;
transform: perspective(1px) translateZ(0px);
font-size: 12px;
display: flex;
flex-flow: row nowrap;
width: 100%;
-moz-box-align: center;
align-items: center;
padding: 0.5rem;
border-radius: 12px;
cursor: pointer;
user-select: none;
background-color: rgb(247, 248, 250);
border: 1px solid rgb(237, 238, 242);
color: rgb(0, 0, 0);
font-weight: 500;
}

.showUseraccount {
    flex: 1 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    margin: 0px 0.5rem 0px 0.25rem;
    font-size: 1rem;
    width: -moz-fit-content;
    font-weight: 500;
}

.arrow {
    padding: 4px;
    border-radius: 12px;
    height: 32px;
    width: 32px;
    position: relative;
    margin-top: -14px;
    margin-bottom: -14px;
    left: calc(50% - 16px);
    z-index: 2;
}
    
 .enableMetamaskButton {
    padding: 16px;
    width: 100%;
    text-align: center;
    border-radius: 20px;
    outline: currentcolor none medium;
    border: 1px solid transparent;
    text-decoration: none;
    display: flex;
    -moz-box-pack: center;
    justify-content: center;
    flex-wrap: nowrap;
    -moz-box-align: center;
    align-items: center;
    cursor: pointer;
    position: relative;
    z-index: 1;
    will-change: transform;
    transition: transform 450ms ease 0s;
    transform: perspective(1px) translateZ(0px);
    background-color: rgb(253, 234, 241);
    color: rgb(255, 0, 122);
    font-size: 16px;
    font-weight: 500;
}
    
</style>
</head>
<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
<script>


// Modern DApp Browsers
if (window.ethereum) {
   web3 = new Web3(window.ethereum);
   try { 
      window.ethereum.enable().then(function() {
          
          // User has allowed account access to DApp...
      });
   } catch(e) {
      // User has denied account access to DApp...
   }
}
// Legacy DApp Browsers
else if (window.web3) {
    web3 = new Web3(web3.currentProvider);
    
}
// Non-DApp Browsers
else {
    alert('You have to install MetaMask !');
}

</script>
<body>
<div class="textfont">
    BCHSWAP
    <div class="userWallet">
    <div class="bchBalance">
        <h2><span class="showBalance"></span> BCH</h2>
</div>
<div class="showUseraccount">
    <div class="userAccount">
<h2><span class="showAccount"></span></h2>
</div>
</div>
</div>

<div class="box">
<div class="title-box">

Swap
</div>
<div class="swap-front">

<div class="swap-box" label="From">

<div class="swap-currency">
<div class="swapinput">
<button class="select"><span class="select_new"><div class="currency_image">
<img src="./img/bch_icon.png" style="margin-right: 0.5rem;" class="currency_image2">
<span class="textfont">
BCH</span></div>
    <path d="M0.97168 1L6.20532 6L11.439 1" stroke="#AEAEAE"></path></span></button>


    <input class="token-amount-input" inputmode="decimal" autocomplete="off" autocorrect="off" type="text" pattern="^[0-9]*[.,]?[0-9]*$" placeholder="0.0" minlength="1" maxlength="79" spellcheck="false" value="">


</div>

<div class="arrow">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#888D9B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19">
    
</line><polyline points="19 12 12 19 5 12"></polyline></svg>
</div>

<div class="from">








</div>
</div>
<button class="enableMetamaskButton" >
Connect wallet
</button>
</div></div></div>


<script>


const ethereumButton = document.querySelector('.enableMetamaskButton');
const showAccount = document.querySelector('.showAccount');
const showBalance = document.querySelector('.showBalance');


window.onload = function() {
    getAccount();
    getBalance();
};







async function getAccount() {
    const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
    const user_account = accounts[0];
    const account = user_account.substring(0, 6) + "..." + user_account.substring(38, 42);
    showAccount.innerHTML = account;
}

async function getBalance() {
    var web3 = new Web3(new Web3.providers.HttpProvider('http://moeing.tech:8545'));
    web3.setProvider(new Web3.providers.WebsocketProvider('wss://smartbch-wss.greyh.at'));
    var address = "0x72FcccAA6223FE66A64525eC038001d8aDD865E3";
    const balance = await web3.eth.getBalance(address);
    web3.utils.toWei(
        balance,
        'gwei'
    );
    const user_balance = balance.substring(0, 2)
      showBalance.innerHTML = user_balance;
}




</script>
</body>
</html>
